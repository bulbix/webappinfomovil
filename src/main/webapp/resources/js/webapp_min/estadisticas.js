var app=angular.module("EstadisticasInfomovilApp",[]);app.controller("EstadisticasCtrl",function($scope,$http,MensajesService){function cargarDatosGrafica(cual,fechaInicial,fechaFinal){generarMensaje("Obteniendo datos"),$http({method:"GET",url:contextPath+"/infomovil/getDatosEstadistica",params:{fechaInicial:fechaInicial,fechaFinal:fechaFinal,cual:cual}}).then(function(response){estadistica.fechaInicial=response.data.fechaInicial,estadistica.fechaFinal=response.data.fechaFinal;var titulos={personalizado:"Del "+fechaInicial+" al "+fechaFinal,"1semana":"Reporte 1 semana","1mes":"Reporte 1 mes","3meses":"Reporte 3 meses","6meses":"Reporte 6 meses","1anio":"Reporte 1 año"};$("#tituloReporte").text(titulos[cual]),$("#numVisitasPagina").html("Visitas totales a mi página: <strong>"+response.data.sumVisitasTotales+"</strong>"),$("#numPersonasUnicas").html("Número de personas únicas qué la visitaron: <strong>"+response.data.sumVisitasUnicas+"</strong>"),$.unblockUI()},function(response){$.unblockUI()})}var estadistica=this;$.jqplot.config.enablePlugins=!0,$.jqplot._noToImageButton=!0,$(".datepicker").datepicker({dateFormat:"dd/mm/yy"}),estadistica.init=function(fechaInicial,fechaFinal){estadistica.fechaInicial=fechaInicial,estadistica.fechaFinal=fechaFinal,cargarDatosGrafica("1semana",fechaInicial,fechaFinal),$("#dinamicoPersonalizado").hide()},estadistica.ngclick=function(){$("#dinamicoPersonalizado").show()},estadistica.generarGrafica=function(cual){$("#dinamicoPersonalizado").hide(),"sinplanpro"==cual?MensajesService.cerrarBlockUIGeneral("Reportes","Esta opción esta únicamente disponible para el Plan Pro. ¡Adquiérelo ahora desde la sección Mis Productos! "):cargarDatosGrafica(cual,estadistica.fechaInicial,estadistica.fechaFinal)}});